SELECT BRNCH.BRNCH_NM, EMP.EMP_NM, CLNT.CLNT_ID, CLNT.FRST_NM ||' '|| CLNT.LAST_NM CLNT_NM,
    CLNT.CNIC_NUM, DTL.INSTR_NUM, INFO.ATM_CARD_NO, TO_CHAR(INFO.ATM_CARD_DELVRY_DT, 'dd-MON-yyyy') AS ATM_CARD_DELVRY_DT, 
    TO_CHAR(INFO.ATM_CARD_REC_DT, 'dd-MON-yyyy') AS ATM_CARD_REC_DT, get_clnt_addr(APP.LOAN_APP_SEQ) AS ADDR
    FROM MW_LOAN_APP APP 
    JOIN MW_DSBMT_VCHR_HDR HDR ON HDR.LOAN_APP_SEQ = APP.LOAN_APP_SEQ AND HDR.CRNT_REC_FLG = 1
    JOIN MW_DSBMT_VCHR_DTL DTL ON DTL.DSBMT_HDR_SEQ = HDR.DSBMT_HDR_SEQ AND DTL.CRNT_REC_FLG = 1
    JOIN MW_TYPS TYP ON TYP.TYP_SEQ =  DTL.PYMT_TYPS_SEQ AND TYP.CRNT_REC_FLG = 1 
        AND TYP.TYP_ID IN ('0019')
    JOIN MW_MOB_WAL_INFO INFO ON INFO.MOB_WAL_SEQ = HDR.MOB_WAL_SEQ AND INFO.CRNT_REC_FLG = 1
    JOIN MW_CLNT CLNT ON CLNT.CLNT_SEQ = APP.CLNT_SEQ AND CLNT.CRNT_REC_FLG = 1
    JOIN MW_PORT PORT ON PORT.PORT_SEQ = APP.PORT_SEQ AND PORT.CRNT_REC_FLG = 1
    JOIN MW_PORT_EMP_REL EREL ON  EREL.PORT_SEQ = PORT.PORT_SEQ AND EREL.CRNT_REC_FLG = 1
    JOIN MW_EMP EMP ON EMP.EMP_SEQ = EREL.EMP_SEQ
    JOIN MW_BRNCH BRNCH ON BRNCH.BRNCH_SEQ = PORT.BRNCH_SEQ AND BRNCH.CRNT_REC_FLG = 1 AND BRNCH.BRNCH_SEQ = (CASE WHEN :brnchSeq = -1 THEN BRNCH.BRNCH_SEQ ELSE :brnchSeq END)
    WHERE APP.CRNT_REc_FLG = 1 AND APP.LOAN_APP_STS = 703
          AND TO_DATE(HDR.DSBMT_DT) BETWEEN TO_DATE(:frmDt, 'dd-MON-yyyy') AND TO_DATE(:toDt, 'dd-MON-yyyy')
    ORDER BY HDR.DSBMT_DT DESC